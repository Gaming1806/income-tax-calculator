<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete ITR Income Tax Calculator - India</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .tab-container {
            margin-bottom: 30px;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            flex: 1;
            padding: 12px 20px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 150px;
            margin: 2px;
        }
        
        .tab.active {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.3);
        }
        
        .tab-content {
            display: none;
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .section-header {
            color: #495057;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8rem;
            border-bottom: 3px solid #dee2e6;
            padding-bottom: 10px;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .input-group h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
        }
        
        .form-row {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }
        
        .form-row label {
            font-weight: 500;
            margin-bottom: 5px;
            color: #555;
            font-size: 0.9rem;
        }
        
        .form-row input, .form-row select {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-row input:focus, .form-row select:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.1);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            color: #17a2b8;
            cursor: help;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 350px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 8px;
            padding: 12px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -175px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            line-height: 1.4;
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .calculate-btn {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(78, 205, 196, 0.3);
        }
        
        .regime-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .regime-card {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .regime-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .old-regime {
            border-color: #ff6b6b;
        }
        
        .new-regime {
            border-color: #4ecdc4;
        }
        
        .regime-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .old-regime .regime-title {
            color: #ff6b6b;
        }
        
        .new-regime .regime-title {
            color: #4ecdc4;
        }
        
        .calculation-section {
            margin-bottom: 20px;
        }
        
        .section-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #495057;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 5px;
        }
        
        .calculation-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f1f3f4;
        }
        
        .calculation-row:last-child {
            border-bottom: none;
        }
        
        .calculation-row.total {
            font-weight: bold;
            font-size: 1.1rem;
            background: rgba(0,0,0,0.05);
            padding: 12px 10px;
            margin: 10px -10px 0;
            border-radius: 8px;
        }
        
        .calculation-row.subtotal {
            font-weight: 600;
            color: #2c3e50;
            background: rgba(52, 152, 219, 0.1);
            padding: 8px 10px;
            margin: 5px -10px;
            border-radius: 5px;
        }
        
        .amount {
            font-weight: 500;
        }
        
        .comparison-summary {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-top: 30px;
        }
        
        .comparison-summary h3 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }
        
        .savings {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00b894;
            margin: 10px 0;
        }
        
        .loss {
            font-size: 1.8rem;
            font-weight: bold;
            color: #e74c3c;
            margin: 10px 0;
        }
        
        .results {
            display: none;
        }
        
        .results.show {
            display: block;
        }
        
        .income-summary {
            background: linear-gradient(135deg, #e8f8f5, #d5f4e6);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #27ae60;
        }
        
        .income-summary h3 {
            color: #27ae60;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }
        
        @media (max-width: 768px) {
            .regime-comparison {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                flex: none;
                margin: 2px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Complete ITR Income Tax Calculator</h1>
            <p>India - Financial Year 2024-25 (All Income Heads & Deductions)</p>
        </div>
        
        <div class="content">
            <div class="tab-container">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab(event, 'salary-income')">Salary Income</button>
                    <button class="tab" onclick="switchTab(event, 'house-property')">House Property</button>
                    <button class="tab" onclick="switchTab(event, 'business-profession')">Business/Profession</button>
                    <button class="tab" onclick="switchTab(event, 'capital-gains')">Capital Gains</button>
                    <button class="tab" onclick="switchTab(event, 'other-sources')">Other Sources</button>
                    <button class="tab" onclick="switchTab(event, 'deductions')">Deductions</button>
                </div>

                <!-- Salary Income Tab -->
                <div id="salary-income" class="tab-content active">
                    <h2 class="section-header">üìã Income from Salary (Section 17)</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <h3>Basic Salary Details</h3>
                            <div class="form-row">
                                <label for="basicSalary">Basic Salary (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Basic salary component as per salary slip. Usually 40-50% of CTC</span>
                                    </span>
                                </label>
                                <input type="number" id="basicSalary" value="1000000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="da">Dearness Allowance (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Dearness allowance received from employer</span>
                                    </span>
                                </label>
                                <input type="number" id="da" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="bonus">Bonus & Incentives (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Annual bonus, performance incentives, ex-gratia payments</span>
                                    </span>
                                </label>
                                <input type="number" id="bonus" value="200000" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>HRA & Allowances</h3>
                            <div class="form-row">
                                <label for="hraReceived">HRA Received (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">House Rent Allowance received from employer</span>
                                    </span>
                                </label>
                                <input type="number" id="hraReceived" value="600000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="rentPaid">Annual Rent Paid (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Actual rent paid for accommodation</span>
                                    </span>
                                </label>
                                <input type="number" id="rentPaid" value="480000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="metroCity">City Type</label>
                                <select id="metroCity">
                                    <option value="true">Metro City (Delhi, Mumbai, Chennai, Kolkata)</option>
                                    <option value="false">Non-Metro City</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <label for="ltaReceived">LTA Received (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Leave Travel Allowance from employer</span>
                                    </span>
                                </label>
                                <input type="number" id="ltaReceived" value="50000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="ltaUtilized">LTA Utilized (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Actual travel expenses for domestic travel with bills</span>
                                    </span>
                                </label>
                                <input type="number" id="ltaUtilized" value="50000" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Special Allowances</h3>
                            <div class="form-row">
                                <label for="specialAllowance">Special/Other Allowances (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Transport, medical, education allowances, etc. (taxable portion)</span>
                                    </span>
                                </label>
                                <input type="number" id="specialAllowance" value="300000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="mealAllowance">Meal/Food Allowance (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Food allowance or meal vouchers (taxable)</span>
                                    </span>
                                </label>
                                <input type="number" id="mealAllowance" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="uniform">Uniform/Washing Allowance (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Allowance for uniform, washing, etc.</span>
                                    </span>
                                </label>
                                <input type="number" id="uniform" value="0" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Retirement Benefits</h3>
                            <div class="form-row">
                                <label for="epfEmployer">EPF - Employer Contribution (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Employer's EPF contribution (12% of basic + DA)</span>
                                    </span>
                                </label>
                                <input type="number" id="epfEmployer" value="120000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="epfEmployee">EPF - Employee Contribution (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Your EPF contribution (12% of basic + DA)</span>
                                    </span>
                                </label>
                                <input type="number" id="epfEmployee" value="120000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="gratuity">Gratuity Received (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Gratuity received (exempt up to ‚Çπ20 lakhs)</span>
                                    </span>
                                </label>
                                <input type="number" id="gratuity" value="0" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Perquisites & Benefits</h3>
                            <div class="form-row">
                                <label for="carPerquisite">Car Perquisite (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Value of car provided by employer (as per perquisite rules)</span>
                                    </span>
                                </label>
                                <input type="number" id="carPerquisite" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="phonePerquisite">Phone/Internet Perquisite (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Phone, internet bills paid by employer</span>
                                    </span>
                                </label>
                                <input type="number" id="phonePerquisite" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="clubPerquisite">Club/Other Perquisites (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Club membership, other benefits provided by employer</span>
                                    </span>
                                </label>
                                <input type="number" id="clubPerquisite" value="0" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Professional Tax & TDS</h3>
                            <div class="form-row">
                                <label for="professionalTax">Professional Tax Paid (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Professional tax deducted by employer (deductible from salary)</span>
                                    </span>
                                </label>
                                <input type="number" id="professionalTax" value="2400" min="0">
                            </div>
                            <div class="form-row">
                                <label for="tdsOnSalary">TDS on Salary (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Tax deducted at source by employer</span>
                                    </span>
                                </label>
                                <input type="number" id="tdsOnSalary" value="300000" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- House Property Tab -->
                <div id="house-property" class="tab-content">
                    <h2 class="section-header">üè† Income from House Property (Section 22-27)</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <h3>Self-Occupied Property</h3>
                            <div class="form-row">
                                <label for="selfOccupiedCount">Number of Self-Occupied Properties
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Properties occupied by you/family. First one is exempt, others are deemed let-out</span>
                                    </span>
                                </label>
                                <input type="number" id="selfOccupiedCount" value="1" min="0" max="10">
                            </div>
                            <div class="form-row">
                                <label for="homeLoanInterest">Home Loan Interest - Self Occupied (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Interest on home loan for self-occupied property (max ‚Çπ2 lakhs under Section 24b)</span>
                                    </span>
                                </label>
                                <input type="number" id="homeLoanInterest" value="200000" min="0" max="200000">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Let-Out Property 1</h3>
                            <div class="form-row">
                                <label for="rentalIncome1">Annual Rental Income (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Gross rental income received from tenant</span>
                                    </span>
                                </label>
                                <input type="number" id="rentalIncome1" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="municipalTax1">Municipal Tax Paid (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Municipal/property tax paid by you (30% of NAV if not available)</span>
                                    </span>
                                </label>
                                <input type="number" id="municipalTax1" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="homeLoanInterest1">Home Loan Interest - Let Out (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Interest on home loan for let-out property (no upper limit)</span>
                                    </span>
                                </label>
                                <input type="number" id="homeLoanInterest1" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="repairMaintenance1">Repair & Maintenance (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Actual repair/maintenance expenses or 30% of NAV</span>
                                    </span>
                                </label>
                                <input type="number" id="repairMaintenance1" value="0" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Let-Out Property 2</h3>
                            <div class="form-row">
                                <label for="rentalIncome2">Annual Rental Income (‚Çπ)</label>
                                <input type="number" id="rentalIncome2" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="municipalTax2">Municipal Tax Paid (‚Çπ)</label>
                                <input type="number" id="municipalTax2" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="homeLoanInterest2">Home Loan Interest (‚Çπ)</label>
                                <input type="number" id="homeLoanInterest2" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="repairMaintenance2">Repair & Maintenance (‚Çπ)</label>
                                <input type="number" id="repairMaintenance2" value="0" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Business/Profession Tab -->
                <div id="business-profession" class="tab-content">
                    <h2 class="section-header">üíº Business & Professional Income (Section 28-44)</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <h3>Business Income</h3>
                            <div class="form-row">
                                <label for="businessTurnover">Business Turnover (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Total sales/turnover from business activities</span>
                                    </span>
                                </label>
                                <input type="number" id="businessTurnover" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="businessProfit">Net Business Profit (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Profit after all business expenses</span>
                                    </span>
                                </label>
                                <input type="number" id="businessProfit" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="presumptiveBusiness">Presumptive Business (Section 44AD)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">8% of turnover for turnover up to ‚Çπ2 crores</span>
                                    </span>
                                </label>
                                <select id="presumptiveBusiness">
                                    <option value="no">No - Regular Business</option>
                                    <option value="yes">Yes - Presumptive (44AD)</option>
                                </select>
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Professional Income</h3>
                            <div class="form-row">
                                <label for="professionalReceipts">Professional Receipts (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Total receipts from professional activities</span>
                                    </span>
                                </label>
                                <input type="number" id="professionalReceipts" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="professionalProfit">Net Professional Profit (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Profit after professional expenses</span>
                                    </span>
                                </label>
                                <input type="number" id="professionalProfit" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="presumptiveProfessional">Presumptive Professional (Section 44ADA)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">50% of receipts for receipts up to ‚Çπ50 lakhs</span>
                                    </span>
                                </label>
                                <select id="presumptiveProfessional">
                                    <option value="no">No - Regular Professional</option>
                                    <option value="yes">Yes - Presumptive (44ADA)</option>
                                </select>
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Freelancing/Consultancy</h3>
                            <div class="form-row">
                                <label for="freelanceIncome">Freelance Income (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Income from freelancing, consultancy work</span>
                                    </span>
                                </label>
                                <input type="number" id="freelanceIncome" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="freelanceExpenses">Freelance Expenses (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Business expenses related to freelancing</span>
                                    </span>
                                </label>
                                <input type="number" id="freelanceExpenses" value="0" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Capital Gains Tab -->
                <div id="capital-gains" class="tab-content">
                    <h2 class="section-header">üìà Capital Gains Income (Section 45-55)</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <h3>Short Term Capital Gains</h3>
                            <div class="form-row">
                                <label for="stcgEquity">STCG - Equity/Mutual Funds (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Short term gains from equity shares/equity mutual funds held ‚â§12 months (15% tax)</span>
                                    </span>
                                </label>
                                <input type="number" id="stcgEquity" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="stcgOther">STCG - Other Assets (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">STCG from property, gold, debt funds, etc. (as per slab rates)</span>
                                    </span>
                                </label>
                                <input type="number" id="stcgOther" value="0" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Long Term Capital Gains</h3>
                            <div class="form-row">
                                <label for="ltcgEquity">LTCG - Equity/Mutual Funds (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Long term gains from equity shares/equity MFs held >12 months. ‚Çπ1L exempt, 10% tax above</span>
                                    </span>
                                </label>
                                <input type="number" id="ltcgEquity" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="ltcgProperty">LTCG - Property (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">LTCG from property held >24 months (20% with indexation or 12.5% without)</span>
                                    </span>
                                </label>
                                <input type="number" id="ltcgProperty" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="ltcgOther">LTCG - Other Assets (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">LTCG from debt funds, gold, bonds, etc. (20% with indexation)</span>
                                    </span>
                                </label>
                                <input type="number" id="ltcgOther" value="0" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other Sources Tab -->
                <div id="other-sources" class="tab-content">
                    <h2 class="section-header">üí∞ Income from Other Sources (Section 56-59)</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <h3>Interest Income</h3>
                            <div class="form-row">
                                <label for="savingsInterest">Savings Account Interest (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Interest from savings bank accounts</span>
                                    </span>
                                </label>
                                <input type="number" id="savingsInterest" value="10000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="fdInterest">Fixed Deposit Interest (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Interest from bank/company FDs, RDs</span>
                                    </span>
                                </label>
                                <input type="number" id="fdInterest" value="25000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="bondInterest">Bond/Debenture Interest (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Interest from corporate bonds, government securities</span>
                                    </span>
                                </label>
                                <input type="number" id="bondInterest" value="0" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Dividend Income</h3>
                            <div class="form-row">
                                <label for="dividendIncome">Dividend from Shares/MFs (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Dividend income from shares and mutual funds (taxable in hands of investor)</span>
                                    </span>
                                </label>
                                <input type="number" id="dividendIncome" value="0" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Other Income</h3>
                            <div class="form-row">
                                <label for="familyPensionReceived">Family Pension Received (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Family pension received (1/3rd or ‚Çπ15,000 is exempt)</span>
                                    </span>
                                </label>
                                <input type="number" id="familyPensionReceived" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="royaltyIncome">Royalty/License Income (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Income from royalty, licensing, patents</span>
                                    </span>
                                </label>
                                <input type="number" id="royaltyIncome" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="winningsIncome">Winnings/Lottery (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Income from lottery, crossword puzzles, races (30% TDS)</span>
                                    </span>
                                </label>
                                <input type="number" id="winningsIncome" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="giftIncome">Cash Gifts Above ‚Çπ50,000 (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Cash gifts from non-relatives above ‚Çπ50,000</span>
                                    </span>
                                </label>
                                <input type="number" id="giftIncome" value="0" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Deductions Tab -->
                <div id="deductions" class="tab-content">
                    <h2 class="section-header">üìâ Deductions Under Chapter VI-A</h2>
                    <div class="input-grid">
                        <div class="input-group">
                            <h3>Section 80C (Max ‚Çπ1,50,000)</h3>
                            <div class="form-row">
                                <label for="epf80c">EPF Contribution (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Employee's contribution to EPF (already included in salary calculation)</span>
                                    </span>
                                </label>
                                <input type="number" id="epf80c" value="120000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="ppf">PPF Contribution (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Public Provident Fund investment</span>
                                    </span>
                                </label>
                                <input type="number" id="ppf" value="30000" min="0">
                            </div>
                            <div class="form-row">
                                <label for="elss">ELSS Mutual Funds (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Equity Linked Savings Scheme mutual funds</span>
                                    </span>
                                </label>
                                <input type="number" id="elss" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="lifeInsurance">Life Insurance Premium (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Life insurance premium (max 10% of sum assured for new policies)</span>
                                    </span>
                                </label>
                                <input type="number" id="lifeInsurance" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="homeLoanPrincipal">Home Loan Principal (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Principal repayment of home loan</span>
                                    </span>
                                </label>
                                <input type="number" id="homeLoanPrincipal" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="nsc">NSC Investment (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">National Savings Certificate investment</span>
                                    </span>
                                </label>
                                <input type="number" id="nsc" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="tuitionFees">Tuition Fees (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Tuition fees for maximum 2 children (only tuition fees, not donations)</span>
                                    </span>
                                </label>
                                <input type="number" id="tuitionFees" value="0" min="0">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Health Insurance (Section 80D)</h3>
                            <div class="form-row">
                                <label for="healthInsuranceSelf">Health Insurance - Self & Family (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Health insurance premium for self, spouse, children (Max ‚Çπ25,000)</span>
                                    </span>
                                </label>
                                <input type="number" id="healthInsuranceSelf" value="25000" min="0" max="25000">
                            </div>
                            <div class="form-row">
                                <label for="healthInsuranceParents">Health Insurance - Parents (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Health insurance for parents (‚Çπ25K if below 60, ‚Çπ50K if above 60)</span>
                                    </span>
                                </label>
                                <input type="number" id="healthInsuranceParents" value="0" min="0" max="50000">
                            </div>
                            <div class="form-row">
                                <label for="preventiveHealthCheckup">Preventive Health Checkup (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Preventive health checkup (Max ‚Çπ5,000 within 80D limit)</span>
                                    </span>
                                </label>
                                <input type="number" id="preventiveHealthCheckup" value="0" min="0" max="5000">
                            </div>
                        </div>

                        <div class="input-group">
                            <h3>Additional Deductions</h3>
                            <div class="form-row">
                                <label for="nps80ccd1b">NPS Additional (80CCD1B) (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Additional NPS contribution over 80CCD(1A) - Max ‚Çπ50,000</span>
                                    </span>
                                </label>
                                <input type="number" id="nps80ccd1b" value="50000" min="0" max="50000">
                            </div>
                            <div class="form-row">
                                <label for="educationLoanInterest">Education Loan Interest (80E) (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Interest on education loan (no upper limit, 8 years max)</span>
                                    </span>
                                </label>
                                <input type="number" id="educationLoanInterest" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="charitableDonation">Charitable Donations (80G) (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Donations to approved charitable institutions (50% or 100% deduction based on institution)</span>
                                    </span>
                                </label>
                                <input type="number" id="charitableDonation" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="disabilityDeduction">Disability Deduction (80U) (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">‚Çπ75,000 for 40-80% disability, ‚Çπ1,25,000 for 80%+ disability</span>
                                    </span>
                                </label>
                                <input type="number" id="disabilityDeduction" value="0" min="0">
                            </div>
                            <div class="form-row">
                                <label for="medicalTreatment">Medical Treatment (80DDB) (‚Çπ)
                                    <span class="tooltip">‚ÑπÔ∏è
                                        <span class="tooltiptext">Medical treatment for specified diseases (‚Çπ40K below 60, ‚Çπ1L above 60)</span>
                                    </span>
                                </label>
                                <input type="number" id="medicalTreatment" value="0" min="0">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="calculate-btn" onclick="calculateComprehensiveTax()">üßÆ Calculate Comprehensive Tax</button>
            
            <div class="results" id="results">
                <div class="income-summary" id="incomeSummary"></div>
                
                <div class="regime-comparison">
                    <!-- Old Tax Regime -->
                    <div class="regime-card old-regime">
                        <h2 class="regime-title">Old Tax Regime (Section 87A Rebate Available)</h2>
                        
                        <div class="calculation-section">
                            <div class="section-title">Gross Total Income</div>
                            <div id="oldRegimeIncome"></div>
                        </div>
                        
                        <div class="calculation-section">
                            <div class="section-title">Deductions</div>
                            <div id="oldRegimeDeductions"></div>
                        </div>
                        
                        <div class="calculation-section">
                            <div class="section-title">Tax Calculation</div>
                            <div id="oldRegimeTax"></div>
                        </div>
                    </div>
                    
                    <!-- New Tax Regime -->
                    <div class="regime-card new-regime">
                        <h2 class="regime-title">New Tax Regime (Section 87A Rebate Available)</h2>
                        
                        <div class="calculation-section">
                            <div class="section-title">Gross Total Income</div>
                            <div id="newRegimeIncome"></div>
                        </div>
                        
                        <div class="calculation-section">
                            <div class="section-title">Limited Deductions</div>
                            <div id="newRegimeDeductions"></div>
                        </div>
                        
                        <div class="calculation-section">
                            <div class="section-title">Tax Calculation</div>
                            <div id="newRegimeTax"></div>
                        </div>
                    </div>
                </div>
                
                <div class="comparison-summary" id="comparisonSummary"></div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(evt, tabName) {
            var i, tabcontent, tabs;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            tabs = document.getElementsByClassName("tab");
            for (i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove("active");
            }
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        function formatNumber(num) {
            return num.toLocaleString('en-IN');
        }

        function calculateComprehensiveTax() {
            // SALARY INCOME CALCULATION
            const basicSalary = parseFloat(document.getElementById('basicSalary').value) || 0;
            const da = parseFloat(document.getElementById('da').value) || 0;
            const bonus = parseFloat(document.getElementById('bonus').value) || 0;
            const hraReceived = parseFloat(document.getElementById('hraReceived').value) || 0;
            const rentPaid = parseFloat(document.getElementById('rentPaid').value) || 0;
            const isMetro = document.getElementById('metroCity').value === 'true';
            const ltaReceived = parseFloat(document.getElementById('ltaReceived').value) || 0;
            const ltaUtilized = parseFloat(document.getElementById('ltaUtilized').value) || 0;
            const specialAllowance = parseFloat(document.getElementById('specialAllowance').value) || 0;
            const mealAllowance = parseFloat(document.getElementById('mealAllowance').value) || 0;
            const uniform = parseFloat(document.getElementById('uniform').value) || 0;
            const epfEmployer = parseFloat(document.getElementById('epfEmployer').value) || 0;
            const epfEmployee = parseFloat(document.getElementById('epfEmployee').value) || 0;
            const gratuity = parseFloat(document.getElementById('gratuity').value) || 0;
            const carPerquisite = parseFloat(document.getElementById('carPerquisite').value) || 0;
            const phonePerquisite = parseFloat(document.getElementById('phonePerquisite').value) || 0;
            const clubPerquisite = parseFloat(document.getElementById('clubPerquisite').value) || 0;
            const professionalTax = parseFloat(document.getElementById('professionalTax').value) || 0;

            // Calculate HRA Exemption
            const hraExemptionPercent = isMetro ? 0.5 : 0.4;
            const hraExemption1 = hraReceived;
            const hraExemption2 = basicSalary * hraExemptionPercent;
            const hraExemption3 = Math.max(0, rentPaid - (basicSalary * 0.1));
            const hraExemption = Math.min(hraExemption1, hraExemption2, hraExemption3);

            // Calculate LTA Exemption
            const ltaExemption = Math.min(ltaReceived, ltaUtilized);

            // Calculate Gratuity Exemption
            const gratuityExemption = Math.min(gratuity, 2000000); // Max 20 lakhs exempt

            // Calculate Gross Salary
            const grossSalary = basicSalary + da + bonus + hraReceived + ltaReceived + specialAllowance + 
                              mealAllowance + uniform + epfEmployer + gratuity + carPerquisite + 
                              phonePerquisite + clubPerquisite;

            // Calculate Net Salary for Old Regime
            const salaryIncomeOld = grossSalary - hraExemption - ltaExemption - gratuityExemption - professionalTax;

            // Calculate Net Salary for New Regime (no HRA/LTA exemption)
            const salaryIncomeNew = grossSalary - gratuityExemption - professionalTax;

            // HOUSE PROPERTY INCOME
            const selfOccupiedCount = parseFloat(document.getElementById('selfOccupiedCount').value) || 0;
            const homeLoanInterest = parseFloat(document.getElementById('homeLoanInterest').value) || 0;
            
            // Self-occupied property loss (only interest deduction)
            const selfOccupiedLoss = -Math.min(homeLoanInterest, 200000);
            
            // Let-out properties
            const rentalIncome1 = parseFloat(document.getElementById('rentalIncome1').value) || 0;
            const municipalTax1 = parseFloat(document.getElementById('municipalTax1').value) || 0;
            const homeLoanInterest1 = parseFloat(document.getElementById('homeLoanInterest1').value) || 0;
            const repairMaintenance1 = parseFloat(document.getElementById('repairMaintenance1').value) || 0;
            
            const rentalIncome2 = parseFloat(document.getElementById('rentalIncome2').value) || 0;
            const municipalTax2 = parseFloat(document.getElementById('municipalTax2').value) || 0;
            const homeLoanInterest2 = parseFloat(document.getElementById('homeLoanInterest2').value) || 0;
            const repairMaintenance2 = parseFloat(document.getElementById('repairMaintenance2').value) || 0;

            // NAV calculation for let-out properties
            const nav1 = rentalIncome1 - municipalTax1;
            const standardDeduction1 = nav1 * 0.3;
            const propertyIncome1 = Math.max(0, nav1 - standardDeduction1 - homeLoanInterest1 - repairMaintenance1);

            const nav2 = rentalIncome2 - municipalTax2;
            const standardDeduction2 = nav2 * 0.3;
            const propertyIncome2 = Math.max(0, nav2 - standardDeduction2 - homeLoanInterest2 - repairMaintenance2);

            const totalPropertyIncome = selfOccupiedLoss + propertyIncome1 + propertyIncome2;

            // BUSINESS/PROFESSIONAL INCOME
            const businessTurnover = parseFloat(document.getElementById('businessTurnover').value) || 0;
            const businessProfit = parseFloat(document.getElementById('businessProfit').value) || 0;
            const presumptiveBusiness = document.getElementById('presumptiveBusiness').value === 'yes';
            
            const professionalReceipts = parseFloat(document.getElementById('professionalReceipts').value) || 0;
            const professionalProfit = parseFloat(document.getElementById('professionalProfit').value) || 0;
            const presumptiveProfessional = document.getElementById('presumptiveProfessional').value === 'yes';
            
            const freelanceIncome = parseFloat(document.getElementById('freelanceIncome').value) || 0;
            const freelanceExpenses = parseFloat(document.getElementById('freelanceExpenses').value) || 0;

            let finalBusinessIncome = businessProfit;
            if (presumptiveBusiness && businessTurnover <= 20000000) {
                finalBusinessIncome = Math.max(businessProfit, businessTurnover * 0.08);
            }

            let finalProfessionalIncome = professionalProfit;
            if (presumptiveProfessional && professionalReceipts <= 5000000) {
                finalProfessionalIncome = Math.max(professionalProfit, professionalReceipts * 0.5);
            }

            const businessProfessionalIncome = finalBusinessIncome + finalProfessionalIncome + 
                                             Math.max(0, freelanceIncome - freelanceExpenses);

            // CAPITAL GAINS
            const stcgEquity = parseFloat(document.getElementById('stcgEquity').value) || 0;
            const stcgOther = parseFloat(document.getElementById('stcgOther').value) || 0;
            const ltcgEquity = parseFloat(document.getElementById('ltcgEquity').value) || 0;
            const ltcgProperty = parseFloat(document.getElementById('ltcgProperty').value) || 0;
            const ltcgOther = parseFloat(document.getElementById('ltcgOther').value) || 0;

            const totalCapitalGains = stcgEquity + stcgOther + ltcgEquity + ltcgProperty + ltcgOther;

            // OTHER SOURCES
            const savingsInterest = parseFloat(document.getElementById('savingsInterest').value) || 0;
            const fdInterest = parseFloat(document.getElementById('fdInterest').value) || 0;
            const bondInterest = parseFloat(document.getElementById('bondInterest').value) || 0;
            const dividendIncome = parseFloat(document.getElementById('dividendIncome').value) || 0;
            const familyPensionReceived = parseFloat(document.getElementById('familyPensionReceived').value) || 0;
            const royaltyIncome = parseFloat(document.getElementById('royaltyIncome').value) || 0;
            const winningsIncome = parseFloat(document.getElementById('winningsIncome').value) || 0;
            const giftIncome = parseFloat(document.getElementById('giftIncome').value) || 0;

            // Family pension exemption
            const familyPensionExemption = Math.min(familyPensionReceived / 3, 15000);
            const netFamilyPension = familyPensionReceived - familyPensionExemption;

            const otherSourcesIncome = savingsInterest + fdInterest + bondInterest + dividendIncome + 
                                     netFamilyPension + royaltyIncome + winningsIncome + giftIncome;

            // GROSS TOTAL INCOME
            const grossTotalIncomeOld = salaryIncomeOld + totalPropertyIncome + businessProfessionalIncome + 
                                       totalCapitalGains + otherSourcesIncome;
            const grossTotalIncomeNew = salaryIncomeNew + totalPropertyIncome + businessProfessionalIncome + 
                                       totalCapitalGains + otherSourcesIncome;

            // DEDUCTIONS CALCULATION
            const epf80c = parseFloat(document.getElementById('epf80c').value) || 0;
            const ppf = parseFloat(document.getElementById('ppf').value) || 0;
            const elss = parseFloat(document.getElementById('elss').value) || 0;
            const lifeInsurance = parseFloat(document.getElementById('lifeInsurance').value) || 0;
            const homeLoanPrincipal = parseFloat(document.getElementById('homeLoanPrincipal').value) || 0;
            const nsc = parseFloat(document.getElementById('nsc').value) || 0;
            const tuitionFees = parseFloat(document.getElementById('tuitionFees').value) || 0;

            const total80C = Math.min(epf80c + ppf + elss + lifeInsurance + homeLoanPrincipal + nsc + tuitionFees, 150000);

            const healthInsuranceSelf = parseFloat(document.getElementById('healthInsuranceSelf').value) || 0;
            const healthInsuranceParents = parseFloat(document.getElementById('healthInsuranceParents').value) || 0;
            const preventiveHealthCheckup = parseFloat(document.getElementById('preventiveHealthCheckup').value) || 0;
            const total80D = Math.min(healthInsuranceSelf + healthInsuranceParents + preventiveHealthCheckup, 75000);

            const nps80ccd1b = parseFloat(document.getElementById('nps80ccd1b').value) || 0;
            const educationLoanInterest = parseFloat(document.getElementById('educationLoanInterest').value) || 0;
            const charitableDonation = parseFloat(document.getElementById('charitableDonation').value) || 0;
            const disabilityDeduction = parseFloat(document.getElementById('disabilityDeduction').value) || 0;
            const medicalTreatment = parseFloat(document.getElementById('medicalTreatment').value) || 0;

            // Interest deductions (80TTA/80TTB)
            const interestDeduction = Math.min(savingsInterest, 10000); // 80TTA for individuals

            // Old Regime Deductions
            const oldStandardDeduction = 50000;
            const totalOldDeductions = oldStandardDeduction + total80C + total80D + nps80ccd1b + 
                                     educationLoanInterest + charitableDonation + disabilityDeduction + 
                                     medicalTreatment + interestDeduction;

            // New Regime Deductions (only standard deduction and family pension exemption)
            const newStandardDeduction = 75000;
            const totalNewDeductions = newStandardDeduction;

            // Calculate Taxable Income
            const oldTaxableIncome = Math.max(0, grossTotalIncomeOld - totalOldDeductions);
            const newTaxableIncome = Math.max(0, grossTotalIncomeNew - totalNewDeductions);

            // Tax calculation functions
            function calculateOldRegimeTax(income) {
                let tax = 0;
                if (income > 250000) tax += Math.min(income - 250000, 250000) * 0.05;
                if (income > 500000) tax += Math.min(income - 500000, 500000) * 0.20;
                if (income > 1000000) tax += (income - 1000000) * 0.30;
                return tax;
            }

            function calculateNewRegimeTax(income) {
                let tax = 0;
                if (income > 300000) tax += Math.min(income - 300000, 400000) * 0.05;
                if (income > 700000) tax += Math.min(income - 700000, 300000) * 0.10;
                if (income > 1000000) tax += Math.min(income - 1000000, 200000) * 0.15;
                if (income > 1200000) tax += Math.min(income - 1200000, 300000) * 0.20;
                if (income > 1500000) tax += (income - 1500000) * 0.30;
                return tax;
            }

            // Calculate special rates for capital gains
            const stcgEquityTax = stcgEquity * 0.15; // 15% for equity STCG
            const ltcgEquityTax = Math.max(0, ltcgEquity - 100000) * 0.10; // 10% above ‚Çπ1L for equity LTCG
            const ltcgOtherTax = (ltcgProperty + ltcgOther) * 0.20; // 20% for other LTCG

            // Regular tax calculation
            const regularIncomeOld = oldTaxableIncome - stcgEquity - ltcgEquity - ltcgProperty - ltcgOther;
            const regularIncomeNew = newTaxableIncome - stcgEquity - ltcgEquity - ltcgProperty - ltcgOther;

            const oldRegularTax = calculateOldRegimeTax(Math.max(0, regularIncomeOld));
            const newRegularTax = calculateNewRegimeTax(Math.max(0, regularIncomeNew));

            // Total tax before cess
            const oldTax = oldRegularTax + stcgEquityTax + ltcgEquityTax + ltcgOtherTax;
            const newTax = newRegularTax + stcgEquityTax + ltcgEquityTax + ltcgOtherTax;

            // Apply Section 87A rebate (‚Çπ12,500 if taxable income ‚â§ ‚Çπ5L)
            const oldRebate = oldTaxableIncome <= 500000 ? Math.min(oldTax, 12500) : 0;
            const newRebate = newTaxableIncome <= 700000 ? Math.min(newTax, 25000) : 0;

            const oldTaxAfterRebate = Math.max(0, oldTax - oldRebate);
            const newTaxAfterRebate = Math.max(0, newTax - newRebate);

            // Health & Education Cess (4%)
            const oldCess = oldTaxAfterRebate * 0.04;
            const newCess = newTaxAfterRebate * 0.04;

            const oldTotal = oldTaxAfterRebate + oldCess;
            const newTotal = newTaxAfterRebate + newCess;

            // Display Income Summary
            document.getElementById('incomeSummary').innerHTML = `
                <h3>üìä Gross Total Income Breakdown</h3>
                <div class="calculation-row">
                    <span>Salary Income</span>
                    <span class="amount">‚Çπ${formatNumber(salaryIncomeOld)} / ‚Çπ${formatNumber(salaryIncomeNew)} (Old/New)</span>
                </div>
                <div class="calculation-row">
                    <span>House Property Income</span>
                    <span class="amount">‚Çπ${formatNumber(totalPropertyIncome)}</span>
                </div>
                <div class="calculation-row">
                    <span>Business/Professional Income</span>
                    <span class="amount">‚Çπ${formatNumber(businessProfessionalIncome)}</span>
                </div>
                <div class="calculation-row">
                    <span>Capital Gains</span>
                    <span class="amount">‚Çπ${formatNumber(totalCapitalGains)}</span>
                </div>
                <div class="calculation-row">
                    <span>Other Sources</span>
                    <span class="amount">‚Çπ${formatNumber(otherSourcesIncome)}</span>
                </div>
                <div class="calculation-row total">
                    <span>Gross Total Income</span>
                    <span class="amount">‚Çπ${formatNumber(grossTotalIncomeOld)} / ‚Çπ${formatNumber(grossTotalIncomeNew)} (Old/New)</span>
                </div>
            `;

            // Display Old Regime Income
            document.getElementById('oldRegimeIncome').innerHTML = `
                <div class="calculation-row">
                    <span>Salary Income</span>
                    <span class="amount">‚Çπ${formatNumber(salaryIncomeOld)}</span>
                </div>
                <div class="calculation-row">
                    <span>House Property</span>
                    <span class="amount">‚Çπ${formatNumber(totalPropertyIncome)}</span>
                </div>
                <div class="calculation-row">
                    <span>Business/Professional</span>
                    <span class="amount">‚Çπ${formatNumber(businessProfessionalIncome)}</span>
                </div>
                <div class="calculation-row">
                    <span>Capital Gains</span>
                    <span class="amount">‚Çπ${formatNumber(totalCapitalGains)}</span>
                </div>
                <div class="calculation-row">
                    <span>Other Sources</span>
                    <span class="amount">‚Çπ${formatNumber(otherSourcesIncome)}</span>
                </div>
                <div class="calculation-row total">
                    <span>Gross Total Income</span>
                    <span class="amount">‚Çπ${formatNumber(grossTotalIncomeOld)}</span>
                </div>
            `;

            // Display Old Regime Deductions
            document.getElementById('oldRegimeDeductions').innerHTML = `
                <div class="calculation-row">
                    <span>Standard Deduction</span>
                    <span class="amount">-‚Çπ${formatNumber(oldStandardDeduction)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 80C</span>
                    <span class="amount">-‚Çπ${formatNumber(total80C)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 80D</span>
                    <span class="amount">-‚Çπ${formatNumber(total80D)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 80CCD(1B)</span>
                    <span class="amount">-‚Çπ${formatNumber(nps80ccd1b)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 80E</span>
                    <span class="amount">-‚Çπ${formatNumber(educationLoanInterest)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 80G</span>
                    <span class="amount">-‚Çπ${formatNumber(charitableDonation)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 80U</span>
                    <span class="amount">-‚Çπ${formatNumber(disabilityDeduction)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 80DDB</span>
                    <span class="amount">-‚Çπ${formatNumber(medicalTreatment)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 80TTA</span>
                    <span class="amount">-‚Çπ${formatNumber(interestDeduction)}</span>
                </div>
                <div class="calculation-row total">
                    <span>Total Deductions</span>
                    <span class="amount">-‚Çπ${formatNumber(totalOldDeductions)}</span>
                </div>
                <div class="calculation-row total">
                    <span>Taxable Income</span>
                    <span class="amount">‚Çπ${formatNumber(oldTaxableIncome)}</span>
                </div>
            `;

            // Display New Regime Income
            document.getElementById('newRegimeIncome').innerHTML = `
                <div class="calculation-row">
                    <span>Salary Income (No HRA/LTA exemption)</span>
                    <span class="amount">‚Çπ${formatNumber(salaryIncomeNew)}</span>
                </div>
                <div class="calculation-row">
                    <span>House Property</span>
                    <span class="amount">‚Çπ${formatNumber(totalPropertyIncome)}</span>
                </div>
                <div class="calculation-row">
                    <span>Business/Professional</span>
                    <span class="amount">‚Çπ${formatNumber(businessProfessionalIncome)}</span>
                </div>
                <div class="calculation-row">
                    <span>Capital Gains</span>
                    <span class="amount">‚Çπ${formatNumber(totalCapitalGains)}</span>
                </div>
                <div class="calculation-row">
                    <span>Other Sources</span>
                    <span class="amount">‚Çπ${formatNumber(otherSourcesIncome)}</span>
                </div>
                <div class="calculation-row total">
                    <span>Gross Total Income</span>
                    <span class="amount">‚Çπ${formatNumber(grossTotalIncomeNew)}</span>
                </div>
            `;

            // Display New Regime Deductions
            document.getElementById('newRegimeDeductions').innerHTML = `
                <div class="calculation-row">
                    <span>Standard Deduction</span>
                    <span class="amount">-‚Çπ${formatNumber(newStandardDeduction)}</span>
                </div>
                <div class="calculation-row" style="color: #e74c3c; font-style: italic;">
                    <span>All Section 80 Deductions (Not Allowed)</span>
                    <span class="amount">‚Çπ0</span>
                </div>
                <div class="calculation-row total">
                    <span>Total Deductions</span>
                    <span class="amount">-‚Çπ${formatNumber(totalNewDeductions)}</span>
                </div>
                <div class="calculation-row total">
                    <span>Taxable Income</span>
                    <span class="amount">‚Çπ${formatNumber(newTaxableIncome)}</span>
                </div>
            `;

            // Old Regime Tax Calculation Display
            let oldTaxBreakup = '';
            if (regularIncomeOld > 0) {
                let remainingIncome = Math.max(0, regularIncomeOld);
                
                if (remainingIncome > 0) {
                    const slab1 = Math.min(remainingIncome, 250000);
                    oldTaxBreakup += `<div class="calculation-row">
                        <span>Up to ‚Çπ2.5L (0%)</span>
                        <span class="amount">‚Çπ0</span>
                    </div>`;
                    remainingIncome -= slab1;
                }
                
                if (remainingIncome > 0) {
                    const slab2 = Math.min(remainingIncome, 250000);
                    const tax2 = slab2 * 0.05;
                    oldTaxBreakup += `<div class="calculation-row">
                        <span>‚Çπ2.5L - ‚Çπ5L (5%)</span>
                        <span class="amount">‚Çπ${formatNumber(tax2)}</span>
                    </div>`;
                    remainingIncome -= slab2;
                }
                
                if (remainingIncome > 0) {
                    const slab3 = Math.min(remainingIncome, 500000);
                    const tax3 = slab3 * 0.20;
                    oldTaxBreakup += `<div class="calculation-row">
                        <span>‚Çπ5L - ‚Çπ10L (20%)</span>
                        <span class="amount">‚Çπ${formatNumber(tax3)}</span>
                    </div>`;
                    remainingIncome -= slab3;
                }
                
                if (remainingIncome > 0) {
                    const tax4 = remainingIncome * 0.30;
                    oldTaxBreakup += `<div class="calculation-row">
                        <span>Above ‚Çπ10L (30%)</span>
                        <span class="amount">‚Çπ${formatNumber(tax4)}</span>
                    </div>`;
                }
            }

            if (stcgEquity > 0) {
                oldTaxBreakup += `<div class="calculation-row">
                    <span>STCG Equity (15%)</span>
                    <span class="amount">‚Çπ${formatNumber(stcgEquityTax)}</span>
                </div>`;
            }

            if (ltcgEquity > 0) {
                oldTaxBreakup += `<div class="calculation-row">
                    <span>LTCG Equity above ‚Çπ1L (10%)</span>
                    <span class="amount">‚Çπ${formatNumber(ltcgEquityTax)}</span>
                </div>`;
            }

            if (ltcgProperty > 0 || ltcgOther > 0) {
                oldTaxBreakup += `<div class="calculation-row">
                    <span>LTCG Other (20%)</span>
                    <span class="amount">‚Çπ${formatNumber(ltcgOtherTax)}</span>
                </div>`;
            }

            document.getElementById('oldRegimeTax').innerHTML = `
                ${oldTaxBreakup}
                <div class="calculation-row subtotal">
                    <span>Tax Before Rebate</span>
                    <span class="amount">‚Çπ${formatNumber(oldTax)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 87A Rebate</span>
                    <span class="amount">-‚Çπ${formatNumber(oldRebate)}</span>
                </div>
                <div class="calculation-row subtotal">
                    <span>Tax After Rebate</span>
                    <span class="amount">‚Çπ${formatNumber(oldTaxAfterRebate)}</span>
                </div>
                <div class="calculation-row">
                    <span>Health & Education Cess (4%)</span>
                    <span class="amount">‚Çπ${formatNumber(oldCess)}</span>
                </div>
                <div class="calculation-row total">
                    <span>Total Tax Payable</span>
                    <span class="amount">‚Çπ${formatNumber(oldTotal)}</span>
                </div>
            `;

            // New Regime Tax Calculation Display
            let newTaxBreakup = '';
            if (regularIncomeNew > 0) {
                let remainingIncome = Math.max(0, regularIncomeNew);
                
                if (remainingIncome > 0) {
                    const slab1 = Math.min(remainingIncome, 300000);
                    newTaxBreakup += `<div class="calculation-row">
                        <span>Up to ‚Çπ3L (0%)</span>
                        <span class="amount">‚Çπ0</span>
                    </div>`;
                    remainingIncome -= slab1;
                }
                
                if (remainingIncome > 0) {
                    const slab2 = Math.min(remainingIncome, 400000);
                    const tax2 = slab2 * 0.05;
                    newTaxBreakup += `<div class="calculation-row">
                        <span>‚Çπ3L - ‚Çπ7L (5%)</span>
                        <span class="amount">‚Çπ${formatNumber(tax2)}</span>
                    </div>`;
                    remainingIncome -= slab2;
                }
                
                if (remainingIncome > 0) {
                    const slab3 = Math.min(remainingIncome, 300000);
                    const tax3 = slab3 * 0.10;
                    newTaxBreakup += `<div class="calculation-row">
                        <span>‚Çπ7L - ‚Çπ10L (10%)</span>
                        <span class="amount">‚Çπ${formatNumber(tax3)}</span>
                    </div>`;
                    remainingIncome -= slab3;
                }
                
                if (remainingIncome > 0) {
                    const slab4 = Math.min(remainingIncome, 200000);
                    const tax4 = slab4 * 0.15;
                    newTaxBreakup += `<div class="calculation-row">
                        <span>‚Çπ10L - ‚Çπ12L (15%)</span>
                        <span class="amount">‚Çπ${formatNumber(tax4)}</span>
                    </div>`;
                    remainingIncome -= slab4;
                }
                
                if (remainingIncome > 0) {
                    const slab5 = Math.min(remainingIncome, 300000);
                    const tax5 = slab5 * 0.20;
                    newTaxBreakup += `<div class="calculation-row">
                        <span>‚Çπ12L - ‚Çπ15L (20%)</span>
                        <span class="amount">‚Çπ${formatNumber(tax5)}</span>
                    </div>`;
                    remainingIncome -= slab5;
                }
                
                if (remainingIncome > 0) {
                    const tax6 = remainingIncome * 0.30;
                    newTaxBreakup += `<div class="calculation-row">
                        <span>Above ‚Çπ15L (30%)</span>
                        <span class="amount">‚Çπ${formatNumber(tax6)}</span>
                    </div>`;
                }
            }

            // Add capital gains tax for new regime (same rates)
            if (stcgEquity > 0) {
                newTaxBreakup += `<div class="calculation-row">
                    <span>STCG Equity (15%)</span>
                    <span class="amount">‚Çπ${formatNumber(stcgEquityTax)}</span>
                </div>`;
            }

            if (ltcgEquity > 0) {
                newTaxBreakup += `<div class="calculation-row">
                    <span>LTCG Equity above ‚Çπ1L (10%)</span>
                    <span class="amount">‚Çπ${formatNumber(ltcgEquityTax)}</span>
                </div>`;
            }

            if (ltcgProperty > 0 || ltcgOther > 0) {
                newTaxBreakup += `<div class="calculation-row">
                    <span>LTCG Other (20%)</span>
                    <span class="amount">‚Çπ${formatNumber(ltcgOtherTax)}</span>
                </div>`;
            }

            document.getElementById('newRegimeTax').innerHTML = `
                ${newTaxBreakup}
                <div class="calculation-row subtotal">
                    <span>Tax Before Rebate</span>
                    <span class="amount">‚Çπ${formatNumber(newTax)}</span>
                </div>
                <div class="calculation-row">
                    <span>Section 87A Rebate (Enhanced)</span>
                    <span class="amount">-‚Çπ${formatNumber(newRebate)}</span>
                </div>
                <div class="calculation-row subtotal">
                    <span>Tax After Rebate</span>
                    <span class="amount">‚Çπ${formatNumber(newTaxAfterRebate)}</span>
                </div>
                <div class="calculation-row">
                    <span>Health & Education Cess (4%)</span>
                    <span class="amount">‚Çπ${formatNumber(newCess)}</span>
                </div>
                <div class="calculation-row total">
                    <span>Total Tax Payable</span>
                    <span class="amount">‚Çπ${formatNumber(newTotal)}</span>
                </div>
            `;

            // Comparison Summary
            const difference = Math.abs(oldTotal - newTotal);
            const betterRegime = oldTotal < newTotal ? 'Old' : 'New';
            const savingsClass = betterRegime === 'New' ? 'savings' : 'loss';
            
            document.getElementById('comparisonSummary').innerHTML = `
                <h3>üí° Complete Tax Regime Comparison</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <p><strong>Old Regime Total Tax:</strong></p>
                        <p style="font-size: 1.3rem; color: #ff6b6b;">‚Çπ${formatNumber(oldTotal)}</p>
                    </div>
                    <div>
                        <p><strong>New Regime Total Tax:</strong></p>
                        <p style="font-size: 1.3rem; color: #4ecdc4;">‚Çπ${formatNumber(newTotal)}</p>
                    </div>
                </div>
                <div class="${savingsClass}">
                    ${betterRegime === 'New' ? 'üí∞ Annual Savings with New Regime' : 'üí∞ Annual Savings with Old Regime'}: ‚Çπ${formatNumber(difference)}
                </div>
                <p><strong>üéØ Recommendation:</strong> Choose the <strong>${betterRegime} Tax Regime</strong> for optimal tax savings!</p>
                <div style="margin-top: 20px; padding: 15px; background: rgba(52, 152, 219, 0.1); border-radius: 10px;">
                    <p style="font-size: 0.9rem; color: #2c3e50; margin-bottom: 10px;"><strong>üìù Key Points:</strong></p>
                    <p style="font-size: 0.85rem; color: #555; line-height: 1.4;">
                        ‚Ä¢ This calculation includes all income heads as per ITR forms<br>
                        ‚Ä¢ Capital gains are taxed at special rates in both regimes<br>
                        ‚Ä¢ Section 87A rebate: ‚Çπ12,500 (old) vs ‚Çπ25,000 (new) for eligible taxpayers<br>
                        ‚Ä¢ Professional tax and other allowed deductions are considered<br>
                        ‚Ä¢ Consult a tax advisor for complex cases and latest updates
                    </p>
                </div>
            `;

            // Show results
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // Calculate on page load with default values
        window.onload = function() {
            calculateComprehensiveTax();
        };
    </script>
</body>
</html>
